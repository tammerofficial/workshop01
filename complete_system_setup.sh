#!/bin/bash

echo "๐ ุจุฏุก ุฅููุงู ุงููุธุงู - ุฌููุน ุงูููููุงุช ุงููุชุจููุฉ"
echo "=================================================="

# ุชุดุบูู ุงููุงูุฌุฑูุดู ุงูุฌุฏูุฏุฉ
echo "๐ฆ ุชุดุบูู ุงููุงูุฌุฑูุดู..."
php artisan migrate --force

# ุชุดุบูู ุงูุณูุฏุฑุฒ
echo "๐ฑ ุชุดุบูู ุงูุณูุฏุฑุฒ..."
php artisan db:seed --force

# ุชูุธูู ุงููุงุด
echo "๐งน ุชูุธูู ุงููุงุด..."
php artisan cache:clear
php artisan config:clear
php artisan route:clear

# ุชุญุฏูุซ ุฃูุชูููุฏุฑ
echo "๐ ุชุญุฏูุซ Composer..."
composer dump-autoload

# ุชุดุบูู ุงูุณูุฑูุฑ ูู ุงูุฎูููุฉ ุฅุฐุง ูู ููู ูุนูู
echo "๐ฅ๏ธ ุชุดุบูู ุงูุณูุฑูุฑ..."
if ! pgrep -f "php artisan serve" > /dev/null; then
    nohup php artisan serve --host=0.0.0.0 --port=8000 > /dev/null 2>&1 &
    echo "ุงูุณูุฑูุฑ ูุนูู ุนูู ุงููููุฐ 8000"
else
    echo "ุงูุณูุฑูุฑ ูุนูู ูุณุจูุงู"
fi

echo "โ ุชู ุงูุงูุชูุงุก ูู ุงูุฅุนุฏุงุฏ ุงูุฃุณุงุณู!"
echo "=================================================="