<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø«Ø¨Øª Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø© - Tailoring Workshop Management System Installer</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Cairo Font -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@200;300;400;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        
        .installer-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .installer-header {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .installer-body {
            padding: 40px;
        }
        
        .step {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 40px;
            position: relative;
        }
        
        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: #e2e8f0;
            z-index: 1;
        }
        
        .progress-step {
            background: white;
            border: 3px solid #e2e8f0;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            font-weight: bold;
            color: #64748b;
        }
        
        .progress-step.completed {
            background: #10b981;
            border-color: #10b981;
            color: white;
        }
        
        .progress-step.active {
            background: #3b82f6;
            border-color: #3b82f6;
            color: white;
        }
        
        .step-label {
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            text-align: center;
            white-space: nowrap;
        }
        
        .form-control:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-weight: 600;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-weight: 600;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-weight: 600;
        }
        
        .log-output {
            background: #1a202c;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #4a5568;
        }
        
        .requirement-item {
            padding: 10px 15px;
            margin: 5px 0;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }
        
        .requirement-ok {
            background: #ecfdf5;
            border-color: #10b981;
            color: #059669;
        }
        
        .requirement-error {
            background: #fef2f2;
            border-color: #ef4444;
            color: #dc2626;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .alert {
            border: none;
            border-radius: 8px;
        }
        
        .card {
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .badge {
            font-size: 0.75em;
        }
    </style>
</head>
<body>
    <div class="installer-container">
        <div class="installer-header">
            <h1><i class="fas fa-cogs"></i> Ù…Ø«Ø¨Øª Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø©</h1>
            <p class="mb-0">Tailoring Workshop Management System Installer</p>
        </div>
        
        <div class="installer-body">
            <!-- Progress Steps -->
            <div class="progress-steps">
                <div class="progress-step active" id="step1">
                    <i class="fas fa-check-circle"></i>
                    <div class="step-label">ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª</div>
                </div>
                <div class="progress-step" id="step2">
                    <i class="fas fa-database"></i>
                    <div class="step-label">Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</div>
                </div>
                <div class="progress-step" id="step3">
                    <i class="fas fa-download"></i>
                    <div class="step-label">ØªØ«Ø¨ÙŠØª Laravel</div>
                </div>
                <div class="progress-step" id="step4">
                    <i class="fas fa-code"></i>
                    <div class="step-label">ØªØ«Ø¨ÙŠØª Frontend</div>
                </div>
                <div class="progress-step" id="step5">
                    <i class="fas fa-user-shield"></i>
                    <div class="step-label">Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</div>
                </div>
                <div class="progress-step" id="step6">
                    <i class="fas fa-rocket"></i>
                    <div class="step-label">Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª</div>
                </div>
            </div>
            
            <!-- Step 1: Requirements Check -->
            <div class="step active" id="requirements-step">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h4><i class="fas fa-check-circle"></i> ÙØ­Øµ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
                    </div>
                    <div class="card-body">
                        <p>Ø³ÙŠØªÙ… ÙØ­Øµ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø© Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…:</p>
                        
                        <div class="text-center mb-3">
                            <button type="button" class="btn btn-primary" onclick="checkRequirements()">
                                <i class="fas fa-search"></i> Ø¨Ø¯Ø¡ ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
                            </button>
                        </div>
                        
                        <div id="requirementsResults" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Step 2: Database Setup -->
            <div class="step" id="database-step">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h4><i class="fas fa-database"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
                    </div>
                    <div class="card-body">
                        <form id="databaseForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Ø§Ø³Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</label>
                                        <input type="text" class="form-control" name="db_name" 
                                               placeholder="tailoring_workshop" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                                        <input type="text" class="form-control" name="db_user" 
                                               value="root" required>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                                        <input type="password" class="form-control" name="db_password" 
                                               placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Ø®Ø§Ø¯Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</label>
                                        <input type="text" class="form-control" name="db_host" 
                                               value="127.0.0.1" required>
                                    </div>
                                </div>
                            </div>
                        </form>
                        
                        <div class="text-center">
                            <button type="button" class="btn btn-warning me-2" onclick="testDatabase()">
                                <i class="fas fa-flask"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                            </button>
                            <button type="button" class="btn btn-success" onclick="setupDatabase()">
                                <i class="fas fa-database"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                            </button>
                        </div>
                        
                        <div id="databaseLog" class="log-output mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Step 3: Laravel Installation -->
            <div class="step" id="laravel-step">
                <div class="card">
                    <div class="card-header bg-warning text-dark">
                        <h4><i class="fas fa-download"></i> ØªØ«Ø¨ÙŠØª Ù…ÙƒØªØ¨Ø§Øª Laravel</h4>
                    </div>
                    <div class="card-body">
                        <p>Ø³ÙŠØªÙ… ØªØ«Ø¨ÙŠØª Ø¬Ù…ÙŠØ¹ Ù…ÙƒØªØ¨Ø§Øª Laravel ÙˆØ¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù…:</p>
                        <ul>
                            <li>ØªØ«Ø¨ÙŠØª Composer dependencies</li>
                            <li>ØªÙˆÙ„ÙŠØ¯ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</li>
                            <li>ØªØ´ØºÙŠÙ„ Database migrations</li>
                            <li>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©</li>
                        </ul>
                        
                        <div class="text-center">
                            <button type="button" class="btn btn-warning" onclick="installLaravel()">
                                <i class="fas fa-download"></i> Ø¨Ø¯Ø¡ ØªØ«Ø¨ÙŠØª Laravel
                            </button>
                        </div>
                        
                        <div id="laravelLog" class="log-output mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Step 4: Frontend Installation -->
            <div class="step" id="frontend-step">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h4><i class="fas fa-code"></i> ØªØ«Ø¨ÙŠØª Frontend React</h4>
                    </div>
                    <div class="card-body">
                        <p>Ø³ÙŠØªÙ… ØªØ«Ø¨ÙŠØª ÙˆØ¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… React:</p>
                        <ul>
                            <li>ØªØ«Ø¨ÙŠØª Node.js dependencies</li>
                            <li>Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ Ù„Ù„Ø¥Ù†ØªØ§Ø¬</li>
                            <li>ØªØ­Ø³ÙŠÙ† Ø§Ù„Ù…Ù„ÙØ§Øª</li>
                        </ul>
                        
                        <div class="text-center">
                            <button type="button" class="btn btn-success" onclick="installFrontend()">
                                <i class="fas fa-code"></i> Ø¨Ø¯Ø¡ ØªØ«Ø¨ÙŠØª Frontend
                            </button>
                        </div>
                        
                        <div id="frontendLog" class="log-output mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Step 5: Admin User -->
            <div class="step" id="admin-step">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h4><i class="fas fa-user-shield"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</h4>
                    </div>
                    <div class="card-body">
                        <form id="adminForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠØ±</label>
                                        <input type="text" class="form-control" name="admin_name" 
                                               value="System Administrator" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label>
                                        <input type="email" class="form-control" name="admin_email" 
                                               value="admin@workshop.com" required>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                                    <input type="password" class="form-control" name="admin_password" 
                                           value="admin123" required>
                                </div>
                            </div>
                        </form>
                        
                        <div class="text-center">
                            <button type="button" class="btn btn-dark" onclick="createAdmin()">
                                <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ
                            </button>
                        </div>
                        
                        <div id="adminLog" class="log-output mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Step 6: Complete -->
            <div class="step" id="complete-step">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h4><i class="fas fa-rocket"></i> Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª</h4>
                    </div>
                    <div class="card-body text-center">
                        <div class="mb-4">
                            <i class="fas fa-check-circle text-success" style="font-size: 80px;"></i>
                        </div>
                        
                        <h3 class="text-success mb-4">ğŸ‰ ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­!</h3>
                        
                        <div class="alert alert-info">
                            <h5>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:</h5>
                            <p class="mb-1"><strong>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</strong> <span id="finalEmail">admin@workshop.com</span></p>
                            <p class="mb-1"><strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> <span id="finalPassword">admin123</span></p>
                        </div>
                        
                        <button type="button" class="btn btn-success btn-lg" onclick="completeInstallation()">
                            <i class="fas fa-rocket"></i> Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ«Ø¨ÙŠØª
                        </button>
                        
                        <div id="completeLog" class="log-output mt-3" style="display: none;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Navigation -->
            <div class="d-flex justify-content-between mt-4">
                <button type="button" class="btn btn-secondary" id="prevBtn" onclick="previousStep()" style="display: none;">
                    <i class="fas fa-arrow-right"></i> Ø§Ù„Ø³Ø§Ø¨Ù‚
                </button>
                <button type="button" class="btn btn-primary" id="nextBtn" onclick="nextStep()" style="display: none;">
                    Ø§Ù„ØªØ§Ù„ÙŠ <i class="fas fa-arrow-left"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        let currentStep = 1;
        const totalSteps = 6;
        
        function showStep(stepName) {
            // Hide all steps
            document.querySelectorAll('.step').forEach(step => {
                step.classList.remove('active');
            });
            
            // Show current step
            document.getElementById(stepName + '-step').classList.add('active');
            
            // Update progress
            updateProgress();
            updateNavigation();
        }
        
        function updateProgress() {
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 < currentStep) {
                    step.classList.add('completed');
                } else if (index + 1 === currentStep) {
                    step.classList.add('active');
                }
            });
        }
        
        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
            nextBtn.style.display = currentStep < totalSteps ? 'block' : 'none';
        }
        
        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                const stepNames = ['requirements', 'database', 'laravel', 'frontend', 'admin', 'complete'];
                showStep(stepNames[currentStep - 1]);
            }
        }
        
        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                const stepNames = ['requirements', 'database', 'laravel', 'frontend', 'admin', 'complete'];
                showStep(stepNames[currentStep - 1]);
            }
        }
        
        async function checkRequirements() {
            const resultsDiv = document.getElementById('requirementsResults');
            resultsDiv.style.display = 'block';
            resultsDiv.innerHTML = '<div class="text-center"><div class="loading-spinner"></div> Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª...</div>';
            
            try {
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: 'action=check_requirements'
                });
                const result = await response.json();
                
                if (result.success) {
                    let html = '';
                    const req = result.data.requirements;
                    
                    // PHP Version
                    html += `<div class="requirement-item ${req.php.status ? 'requirement-ok' : 'requirement-error'}">
                        <i class="fas fa-${req.php.status ? 'check' : 'times'}"></i> 
                        PHP ${req.php.current} (Ù…Ø·Ù„ÙˆØ¨: ${req.php.required}+)
                    </div>`;
                    
                    // Extensions
                    const extensions = ['pdo', 'pdo_mysql', 'mbstring', 'openssl', 'tokenizer', 'xml', 'ctype', 'json', 'curl'];
                    extensions.forEach(ext => {
                        const status = req['ext_' + ext];
                        html += `<div class="requirement-item ${status ? 'requirement-ok' : 'requirement-error'}">
                            <i class="fas fa-${status ? 'check' : 'times'}"></i> 
                            PHP Extension: ${ext}
                        </div>`;
                    });
                    
                    // Tools
                    ['composer', 'nodejs', 'npm'].forEach(tool => {
                        const status = req[tool];
                        html += `<div class="requirement-item ${status ? 'requirement-ok' : 'requirement-error'}">
                            <i class="fas fa-${status ? 'check' : 'times'}"></i> 
                            ${tool.charAt(0).toUpperCase() + tool.slice(1)}
                        </div>`;
                    });
                    
                    // Permissions
                    ['storage', 'cache'].forEach(dir => {
                        const status = req['writable_' + dir];
                        html += `<div class="requirement-item ${status ? 'requirement-ok' : 'requirement-error'}">
                            <i class="fas fa-${status ? 'check' : 'times'}"></i> 
                            Writable: api/${dir}/
                        </div>`;
                    });
                    
                    if (result.data.status) {
                        html += '<div class="alert alert-success mt-3"><i class="fas fa-check"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ù…ØªÙˆÙØ±Ø©! ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„Ø®Ø·ÙˆØ© Ø§Ù„ØªØ§Ù„ÙŠØ©.</div>';
                        document.getElementById('nextBtn').style.display = 'block';
                    } else {
                        html += '<div class="alert alert-danger mt-3"><i class="fas fa-exclamation-triangle"></i> ÙŠØ¬Ø¨ Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</div>';
                    }
                    
                    resultsDiv.innerHTML = html;
                    
                } else {
                    resultsDiv.innerHTML = `<div class="alert alert-danger">Ø®Ø·Ø£: ${result.error}</div>`;
                }
            } catch (error) {
                resultsDiv.innerHTML = `<div class="alert alert-danger">Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}</div>`;
            }
        }
        
        async function testDatabase() {
            const formData = new FormData(document.getElementById('databaseForm'));
            const log = document.getElementById('databaseLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...\n';
            
            try {
                formData.append('action', 'test_database');
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += `âœ“ ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­\n`;
                    log.textContent += `âœ“ Ø¥ØµØ¯Ø§Ø± MySQL: ${result.data.mysql_version}\n`;
                } else {
                    log.textContent += `âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        async function setupDatabase() {
            const formData = new FormData(document.getElementById('databaseForm'));
            const log = document.getElementById('databaseLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...\n';
            
            try {
                formData.append('action', 'setup_database');
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n';
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env\n';
                    log.textContent += '\nâœ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙƒØªÙ…Ù„!\n';
                    
                    setTimeout(() => {
                        currentStep = 3;
                        showStep('laravel');
                    }, 1500);
                } else {
                    log.textContent += `âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        async function installLaravel() {
            const log = document.getElementById('laravelLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ«Ø¨ÙŠØª Laravel...\n';
            
            try {
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: 'action=install_laravel'
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… ØªØ«Ø¨ÙŠØª Composer dependencies\n';
                    log.textContent += 'âœ“ ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚\n';
                    log.textContent += 'âœ“ ØªÙ… ØªØ´ØºÙŠÙ„ Database migrations\n';
                    log.textContent += 'âœ“ ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n';
                    log.textContent += '\nâœ… ØªØ«Ø¨ÙŠØª Laravel Ù…ÙƒØªÙ…Ù„!\n';
                    
                    setTimeout(() => {
                        currentStep = 4;
                        showStep('frontend');
                    }, 1500);
                } else {
                    log.textContent += `âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        async function installFrontend() {
            const log = document.getElementById('frontendLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ«Ø¨ÙŠØª Frontend...\n';
            
            try {
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: 'action=install_frontend'
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… ØªØ«Ø¨ÙŠØª Node.js dependencies\n';
                    log.textContent += 'âœ“ ØªÙ… Ø¨Ù†Ø§Ø¡ React frontend\n';
                    log.textContent += '\nâœ… ØªØ«Ø¨ÙŠØª Frontend Ù…ÙƒØªÙ…Ù„!\n';
                    
                    setTimeout(() => {
                        currentStep = 5;
                        showStep('admin');
                    }, 1500);
                } else {
                    log.textContent += `âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        async function createAdmin() {
            const formData = new FormData(document.getElementById('adminForm'));
            const log = document.getElementById('adminLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ...\n';
            
            try {
                formData.append('action', 'create_admin');
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ\n';
                    log.textContent += `âœ“ Ø§Ù„Ø¨Ø±ÙŠØ¯: ${result.data.email}\n`;
                    log.textContent += `âœ“ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${result.data.password}\n`;
                    log.textContent += '\nâœ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…ÙƒØªÙ…Ù„!\n';
                    
                    // Update final credentials
                    document.getElementById('finalEmail').textContent = result.data.email;
                    document.getElementById('finalPassword').textContent = result.data.password;
                    
                    setTimeout(() => {
                        currentStep = 6;
                        showStep('complete');
                    }, 1500);
                } else {
                    log.textContent += `âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        async function completeInstallation() {
            const log = document.getElementById('completeLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªØ«Ø¨ÙŠØª...\n';
            
            try {
                const response = await fetch('real-installer.php', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: 'action=complete_installation'
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø§Ù„ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªÙ…Ù„\n';
                    log.textContent += 'âœ“ ØªÙ… Ø­ÙØ¸ Ø³Ø¬Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª\n';
                    log.textContent += '\nğŸ‰ Ø§Ù„ØªØ«Ø¨ÙŠØª Ù…ÙƒØªÙ…Ù„ Ø¨Ù†Ø¬Ø§Ø­!\n';
                    log.textContent += '\nğŸ“ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:\n';
                    log.textContent += 'â€¢ Ø§Ø­Ø°Ù Ù…Ø¬Ù„Ø¯ installer Ù„Ù„Ø£Ù…Ø§Ù†\n';
                    log.textContent += 'â€¢ ØºÙŠÙ‘Ø± ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯ÙŠØ±\n';
                    log.textContent += 'â€¢ Ø§Ø¨Ø¯Ø£ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù†Ø¸Ø§Ù…\n';
                } else {
                    log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¥Ù†Ù‡Ø§Ø¡: ${result.error}\n`;
                }
            } catch (error) {
                log.textContent += `âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ${error.message}\n`;
            }
        }
        
        // Initialize
        updateProgress();
        updateNavigation();
    </script>
</body>
</html>