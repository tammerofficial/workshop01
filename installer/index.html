<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ«Ø¨ÙŠØª Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø©</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Arial', sans-serif;
            min-height: 100vh;
        }
        .installer-container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin: 2rem auto;
            max-width: 900px;
            overflow: hidden;
        }
        .installer-header {
            background: linear-gradient(45deg, #2c3e50, #3498db);
            color: white;
            padding: 2rem;
            text-align: center;
        }
        .step {
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            transition: all 0.3s ease;
        }
        .step.active {
            background: #f8f9fa;
            border-left: 5px solid #007bff;
        }
        .step.completed {
            background: #d4edda;
            border-left: 5px solid #28a745;
        }
        .step.error {
            background: #f8d7da;
            border-left: 5px solid #dc3545;
        }
        .progress-bar {
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #007bff, #28a745);
            transition: width 0.5s ease;
        }
        .btn-custom {
            background: linear-gradient(45deg, #007bff, #0056b3);
            border: none;
            color: white;
            padding: 12px 30px;
            border-radius: 8px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .btn-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.3);
            color: white;
        }
        .log-output {
            background: #1e1e1e;
            color: #00ff00;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 1rem;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
        }
        .requirement {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #eee;
        }
        .requirement:last-child {
            border-bottom: none;
        }
        .badge-success {
            background: #28a745 !important;
        }
        .badge-danger {
            background: #dc3545 !important;
        }
        .install-complete {
            text-align: center;
            padding: 3rem;
        }
        .success-icon {
            font-size: 5rem;
            color: #28a745;
            margin-bottom: 1rem;
        }
        .step-item {
            padding: 8px 0;
            transition: all 0.3s ease;
        }
        .step-item i.fa-check-circle {
            color: #28a745 !important;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="installer-container">
            <!-- Header -->
            <div class="installer-header">
                <h1><i class="fas fa-cog fa-spin"></i> Ù…Ø«Ø¨Øª Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø©</h1>
                <p class="mb-0">Tailoring Workshop Management System Installer</p>
                <div class="progress-bar mt-3">
                    <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                </div>
            </div>

            <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ø«Ø¨Øª -->
            <div id="installerContent">
                
                <!-- Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
                <div id="welcomeStep" class="step active">
                    <div class="row">
                        <div class="col-md-8">
                            <h3><i class="fas fa-home text-primary"></i> Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ø«Ø¨Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                            <p class="lead">Ù‡Ø°Ø§ Ø§Ù„Ù…Ø«Ø¨Øª Ø³ÙŠÙ‚ÙˆÙ… Ø¨ØªØ«Ø¨ÙŠØª Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ Ø®Ø§Ø¯Ù…Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹.</p>
                            
                            <div class="alert alert-info">
                                <h5><i class="fas fa-info-circle"></i> Ù…Ø§ Ø³ÙŠÙ‚ÙˆÙ… Ø¨Ù‡ Ø§Ù„Ù…Ø«Ø¨Øª:</h5>
                                <ul class="mb-0">
                                    <li>ÙØ­Øµ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</li>
                                    <li>Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</li>
                                    <li>ØªØ«Ø¨ÙŠØª Ù…ÙƒØªØ¨Ø§Øª Laravel</li>
                                    <li>Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©</li>
                                    <li>ØªØ«Ø¨ÙŠØª Frontend React</li>
                                    <li>Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-md-4 text-center">
                            <i class="fas fa-rocket" style="font-size: 6rem; color: #007bff; opacity: 0.7;"></i>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button class="btn btn-custom btn-lg" onclick="startInstallation()">
                            <i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„ØªØ«Ø¨ÙŠØª
                        </button>
                    </div>
                </div>

                <!-- ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª -->
                <div id="requirementsStep" class="step" style="display: none;">
                    <h3><i class="fas fa-check-circle text-success"></i> ÙØ­Øµ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
                    <div id="requirementsList">
                        <div class="requirement">
                            <span><i class="fas fa-server"></i> Ø¥ØµØ¯Ø§Ø± PHP (8.2+)</span>
                            <span id="phpCheck" class="badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span>
                        </div>
                        <div class="requirement">
                            <span><i class="fas fa-database"></i> MySQL/MariaDB</span>
                            <span id="mysqlCheck" class="badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span>
                        </div>
                        <div class="requirement">
                            <span><i class="fas fa-puzzle-piece"></i> Ø§Ù…ØªØ¯Ø§Ø¯Ø§Øª PHP</span>
                            <span id="extensionsCheck" class="badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span>
                        </div>
                        <div class="requirement">
                            <span><i class="fas fa-folder"></i> ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ù„ÙØ§Øª</span>
                            <span id="permissionsCheck" class="badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span>
                        </div>
                        <div class="requirement">
                            <span><i class="fab fa-node-js"></i> Node.js & NPM</span>
                            <span id="nodeCheck" class="badge">Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...</span>
                        </div>
                    </div>
                    
                    <div class="text-center mt-4">
                        <button class="btn btn-custom" onclick="checkRequirements()">
                            <i class="fas fa-sync fa-spin"></i> Ø¥Ø¹Ø§Ø¯Ø© ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª
                        </button>
                        <button class="btn btn-success ms-2" id="continueBtn" onclick="nextStep()" disabled>
                            <i class="fas fa-arrow-right"></i> Ù…ØªØ§Ø¨Ø¹Ø©
                        </button>
                    </div>
                </div>

                <!-- Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª -->
                <div id="databaseStep" class="step" style="display: none;">
                    <h3><i class="fas fa-database text-info"></i> Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                    <form id="databaseForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ø³Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</label>
                                    <input type="text" class="form-control" name="db_name" required 
                                           placeholder="tailoring_workshop">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                                    <input type="text" class="form-control" name="db_user" required 
                                           placeholder="root">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                                    <input type="password" class="form-control" name="db_password" 
                                           placeholder="Ø§Ø®ØªÙŠØ§Ø±ÙŠ">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ø®Ø§Ø¯Ù… Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</label>
                                    <input type="text" class="form-control" name="db_host" 
                                           value="127.0.0.1" required>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center">
                            <button type="button" class="btn btn-warning" onclick="testDatabase()">
                                <i class="fas fa-flask"></i> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„
                            </button>
                            <button type="button" class="btn btn-success ms-2" onclick="setupDatabaseSimple()">
                                <i class="fas fa-database"></i> ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù†
                            </button>
                        </div>
                    </form>
                    
                    <div id="databaseLog" class="log-output mt-3" style="display: none;"></div>
                </div>

                <!-- Ø§ÙƒØªÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª -->
                <div id="completeStep" class="step" style="display: none;">
                    <div class="install-complete">
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <h2 class="text-success">ØªÙ… Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­! ğŸ‰</h2>
                        <p class="lead">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© ÙˆØ±Ø´Ø© Ø§Ù„Ø®ÙŠØ§Ø·Ø© Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</p>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h5>
                                        <p class="card-text">Ø§Ø¯Ø®Ù„ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù†Ø¸Ø§Ù…</p>
                                        <a href="../" class="btn btn-primary">
                                            <i class="fas fa-tachometer-alt"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card">
                                    <div class="card-body text-center">
                                        <h5 class="card-title">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…</h5>
                                        <p class="card-text">Ø§Ù‚Ø±Ø£ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…</p>
                                        <a href="README.md" class="btn btn-info">
                                            <i class="fas fa-book"></i> Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="alert alert-success mt-4">
                            <h5><i class="fas fa-key"></i> Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©:</h5>
                            <p class="mb-0">
                                <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> admin@workshop.com<br>
                                <strong>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</strong> admin123
                            </p>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button class="btn btn-danger" onclick="removeInstaller()">
                                <i class="fas fa-trash"></i> Ø­Ø°Ù Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª (Ù…ÙˆØµÙ‰ Ø¨Ù‡)
                            </button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let currentStep = 0;
        const steps = ['welcome', 'requirements', 'database', 'complete'];
        
        function updateProgress() {
            const progress = (currentStep / (steps.length - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }
        
        function showStep(stepName) {
            // Ø¥Ø®ÙØ§Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª
            document.querySelectorAll('.step').forEach(step => {
                step.style.display = 'none';
                step.classList.remove('active');
            });
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø®Ø·ÙˆØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            const stepElement = document.getElementById(stepName + 'Step');
            if (stepElement) {
                stepElement.style.display = 'block';
                stepElement.classList.add('active');
            }
            
            updateProgress();
        }
        
        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                showStep(steps[currentStep]);
            }
        }
        
        function startInstallation() {
            currentStep = 1;
            showStep('requirements');
            checkRequirements();
        }
        
        async function checkRequirements() {
            const checks = {
                php_version: { element: 'phpCheck', status: false },
                mysql: { element: 'mysqlCheck', status: false },
                extensions: { element: 'extensionsCheck', status: false },
                permissions: { element: 'permissionsCheck', status: false },
                composer: { element: 'nodeCheck', status: false }
            };
            
            try {
                const response = await fetch('api.php?action=check_requirements');
                const result = await response.json();
                
                if (result.success) {
                    const requirements = result.data;
                    let allOk = true;
                    
                    for (const [key, check] of Object.entries(checks)) {
                        const element = document.getElementById(check.element);
                        element.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙØ­Øµ...';
                        element.className = 'badge bg-warning';
                        
                        await new Promise(resolve => setTimeout(resolve, 500));
                        
                        const req = requirements[key];
                        if (req && req.status) {
                            element.textContent = 'âœ“ Ù…ØªÙˆÙØ±';
                            element.className = 'badge badge-success';
                        } else {
                            element.textContent = 'âœ— ØºÙŠØ± Ù…ØªÙˆÙØ±';
                            element.className = 'badge badge-danger';
                            allOk = false;
                        }
                    }
                    
                    document.getElementById('continueBtn').disabled = !allOk;
                } else {
                    alert('ÙØ´Ù„ ÙÙŠ ÙØ­Øµ Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª: ' + result.error);
                }
            } catch (error) {
                alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + error.message);
            }
        }
        
        async function testDatabase() {
            const formData = new FormData(document.getElementById('databaseForm'));
            const log = document.getElementById('databaseLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...\n';
            
            try {
                formData.append('action', 'test_database');
                const response = await fetch('api.php', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­\n';
                    log.textContent += 'âœ“ ' + result.data.message + '\n';
                } else {
                    log.textContent += 'âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„: ' + result.error + '\n';
                }
            } catch (error) {
                log.textContent += 'âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ' + error.message + '\n';
            }
        }
        
        async function setupDatabaseSimple() {
            const formData = new FormData(document.getElementById('databaseForm'));
            const log = document.getElementById('databaseLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Ø¸Ø§Ù… (Ù…Ø«Ø¨Øª Ù…Ø¨Ø³Ø·)...\n';
            
            try {
                formData.append('action', 'setup_complete');
                const response = await fetch('simple-installer.php', {
                    method: 'POST',
                    body: formData
                });
                const result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª\n';
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†\n';
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ\n';
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù .env\n';
                    log.textContent += '\nğŸ‰ ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­!\n';
                    log.textContent += `\nğŸ“§ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„:\n`;
                    log.textContent += `Ø§Ù„Ø¨Ø±ÙŠØ¯: ${result.data.admin_email}\n`;
                    log.textContent += `ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±: ${result.data.admin_password}\n`;
                    
                    setTimeout(() => {
                        currentStep = 3;
                        showStep('complete');
                    }, 2000);
                } else {
                    log.textContent += 'âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª: ' + result.error + '\n';
                }
            } catch (error) {
                log.textContent += 'âœ— Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©: ' + error.message + '\n';
            }
        }

        async function setupDatabase() {
            const formData = new FormData(document.getElementById('databaseForm'));
            const log = document.getElementById('databaseLog');
            log.style.display = 'block';
            log.textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª...\n';
            
            try {
                // Step 1: Setup database
                formData.append('action', 'setup_database');
                let response = await fetch('api.php', {
                    method: 'POST',
                    body: formData
                });
                let result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error);
                }
                log.textContent += 'âœ“ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ…Ù„Ù .env\n';
                
                // Step 2: Install system
                const installData = new FormData();
                installData.append('action', 'install_system');
                response = await fetch('api.php', {
                    method: 'POST',
                    body: installData
                });
                result = await response.json();
                
                if (!result.success) {
                    throw new Error(result.error);
                }
                log.textContent += 'âœ“ ØªÙ… ØªØ«Ø¨ÙŠØª Laravel ÙˆØ§Ù„Ù…ÙƒØªØ¨Ø§Øª\n';
                log.textContent += 'âœ“ ØªÙ… ØªØ´ØºÙŠÙ„ migrations\n';
                log.textContent += 'âœ“ ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©\n';
                
                // Step 3: Create admin
                const adminData = new FormData();
                adminData.append('action', 'create_admin');
                adminData.append('admin_name', 'System Admin');
                adminData.append('admin_email', 'admin@workshop.com');
                adminData.append('admin_password', 'admin123');
                
                response = await fetch('api.php', {
                    method: 'POST',
                    body: adminData
                });
                result = await response.json();
                
                if (result.success) {
                    log.textContent += 'âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ\n';
                } else {
                    log.textContent += 'âš  ØªØ­Ø°ÙŠØ±: ' + result.error + '\n';
                }
                
                log.textContent += '\nğŸ‰ ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­!\n';
                
                setTimeout(() => {
                    currentStep = 3;
                    showStep('complete');
                }, 1000);
                
            } catch (error) {
                log.textContent += 'âœ— ÙØ´Ù„ ÙÙŠ Ø§Ù„ØªØ«Ø¨ÙŠØª: ' + error.message + '\n';
            }
        }
        
        async function removeInstaller() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØªØŸ Ù„Ù† ØªØªÙ…ÙƒÙ† Ù…Ù† ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ø«Ø¨Øª Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.')) {
                try {
                    const formData = new FormData();
                    formData.append('action', 'remove_installer');
                    const response = await fetch('api.php', {
                        method: 'POST',
                        body: formData
                    });
                    const result = await response.json();
                    
                    if (result.success) {
                        alert('ØªÙ… Ø­Ø°Ù Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª Ø¨Ù†Ø¬Ø§Ø­. Ø³ÙŠØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù….');
                        window.location.href = '../';
                    } else {
                        alert('ÙØ´Ù„ ÙÙŠ Ø­Ø°Ù Ù…Ù„ÙØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª: ' + result.error);
                    }
                } catch (error) {
                    alert('Ø®Ø·Ø£: ' + error.message);
                }
            }
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø«Ø¨Øª
        document.addEventListener('DOMContentLoaded', function() {
            showStep('welcome');
        });
    </script>
</body>
</html>